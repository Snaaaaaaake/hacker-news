{"version":3,"sources":["utils/compareArrays.js","actions/actions.js","component/context/ServiceContext.js","utils/dateFormatter.js","component/NewsCard/NewsCard.js","component/ErrorComponent/ErrorComponent.js","component/Spinner/Spinner.js","component/ErrorBoundary/ErrorBoundary.js","component/MainPage/MainPage.js","component/CommentCard/CommentCard.js","images/arrow.png","component/CommentList/CommentList.js","component/NewsPage/NewsPage.js","component/App/App.js","reducers/listReducer.js","reducers/singleNewsReducer.js","reducers/commentsReducer.js","store/store.js","service/NewsService.js","images/backgroundImage.jpg","component/Layout/Layout.js","index.js"],"names":["compareArrays","array1","array2","length","every","item","index","fetchListRequestAction","type","fetchListSuccessAction","data","payload","fetchListFailureAction","saveIdsAction","fetchSingleNewsRequestAction","fetchSingleNewsSuccessAction","fetchCommentsRequestAction","fetchCommentsSuccessAction","fetchCommentsFailureAction","fetchCommentTreeThunkAction","service","fetchCondition","ids","parent","setExtendedComment","dispatch","getState","getCommentTree","a","getListFromIds","commentList","extendedCommentListPromiseArray","map","comment","kids","extendedKids","Promise","all","then","tree","canceled","updatedComments","commentsState","comments","id","catch","error","ServiceContext","createContext","addZero","date","dateFormatter","unixDate","rawDate","Date","getDate","getMonth","getFullYear","getHours","getMinutes","useStyles","makeStyles","theme","cardRoot","minWidth","border","background","cardContainer","padding","itemText","overflow","title","color","palette","primary","main","NewsCard","style","classes","Card","className","variant","CardContent","to","Typography","component","by","time","score","container","display","justifyContent","margin","text","ErrorComponent","props","Box","message","marginContainer","Spinner","CircularProgress","ErrorBoundary","state","hasError","this","console","log","children","Component","subtitle","paddingLeft","divider","listContainer","flexGrow","minHeight","button","marginLeft","disabled","flexContainer","alignItems","mapDispatchToProps","fetchListThunkAction","finalList","fetchPack","list","listItemPromiseArray","slice","packLength","getSingleItem","listItemArray","listLength","getRawList","rawIds","fetchShadowReloadListThunkAction","rawList","newIdsList","oldIdsList","listState","newItemList","connect","newsService","useContext","useState","resetInterval","setResetInterval","isLoading","useEffect","interval","setInterval","clearInterval","Button","onClick","Divider","height","width","itemSize","itemCount","rootContainer","commentaryContainer","arrowContainer","marginRight","backgroundSize","childrenContainer","depth","arrow","lineHeight","textTransform","fontWeight","spinner","CommentCard","extendHandler","isExtended","closeHandler","deleted","commentaryBody","dangerouslySetInnerHTML","__html","dompurify","sanitize","child","LinearProgress","fetchCommentListThunkAction","removeCommentTreeThunkAction","singleNewsState","extendedComment","news","link","marginTop","fetchSingleNewsThunkAction","fetchShadowReloadCommentListThunkAction","oldNews","newNews","descendants","params","useParams","history","useHistory","push","url","Link","target","href","Error","App","path","exact","initialState","listReducer","action","singleNewsReducer","commentsReducer","store","createStore","combineReducers","applyMiddleware","thunk","checkRes","res","ok","json","status","editItem","root","paper","flexDirection","backgroundImage","backgroundRepeat","textDecoration","Layout","Container","maxWidth","Paper","elevation","fetch","apiUrl","itemPromiseArray","ReactDOM","render","StrictMode","Provider","value","basename","document","getElementById"],"mappings":"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","file":"static/js/main.d8d09fa8.chunk.js","sourcesContent":["export default function compareArrays(array1, array2) {\r\n  if (array1.length !== array2.length) return false;\r\n  if (array1.length === 0) return true;\r\n  return array1.every((item, index) => item === array2[index]);\r\n}\r\n","import compareArrays from \"../utils/compareArrays\";\r\n\r\nconst fetchListRequestAction = () => ({\r\n  type: \"FETCH_LIST_REQUEST\",\r\n});\r\nconst fetchListSuccessAction = (data) => ({\r\n  type: \"FETCH_LIST_SUCCESS\",\r\n  payload: data,\r\n});\r\nconst fetchListFailureAction = (data) => ({\r\n  type: \"FETCH_LIST_FAILURE\",\r\n  payload: data,\r\n});\r\nconst saveIdsAction = (data) => ({\r\n  type: \"SAVE_IDS\",\r\n  payload: data,\r\n});\r\n\r\nconst fetchListThunkAction = (service, fetchCondition) => (dispatch) => {\r\n  let finalList = [];\r\n  async function fetchPack(list) {\r\n    try {\r\n      const listItemPromiseArray = list\r\n        .slice(finalList.length, finalList.length + service.packLength)\r\n        .map((id) => service.getSingleItem(id));\r\n      const listItemArray = await Promise.all(listItemPromiseArray);\r\n      if (!fetchCondition.canceled) {\r\n        finalList = [...finalList, ...listItemArray];\r\n        dispatch(fetchListSuccessAction(finalList));\r\n        if (finalList.length < service.listLength) fetchPack(list);\r\n      }\r\n    } catch (error) {\r\n      throw dispatch(fetchListFailureAction(error));\r\n    }\r\n  }\r\n  dispatch(fetchListRequestAction());\r\n  service\r\n    .getRawList()\r\n    .then((rawIds) => {\r\n      const ids = rawIds.slice(0, service.listLength);\r\n      dispatch(saveIdsAction(ids));\r\n      fetchPack(ids);\r\n    })\r\n    .catch((error) => dispatch(fetchListFailureAction(error)));\r\n};\r\n\r\nconst fetchShadowReloadListThunkAction = (service, fetchCondition) => async (dispatch, getState) => {\r\n  try {\r\n    const rawList = await service.getRawList();\r\n    const newIdsList = rawList.slice(0, service.listLength);\r\n    const oldIdsList = getState().listState.ids;\r\n    if (!compareArrays(newIdsList, oldIdsList) && !fetchCondition.canceled) {\r\n      const newItemList = await service.getListFromIds(newIdsList);\r\n      dispatch(fetchListSuccessAction(newItemList));\r\n      dispatch(saveIdsAction(newIdsList));\r\n    }\r\n  } catch (error) {\r\n    dispatch(fetchListFailureAction(error));\r\n  }\r\n};\r\n\r\nconst fetchSingleNewsRequestAction = () => ({\r\n  type: \"FETCH_SINGLE_NEWS_REQUEST\",\r\n});\r\nconst fetchSingleNewsSuccessAction = (data) => ({\r\n  type: \"FETCH_SINGLE_NEWS_SUCCESS\",\r\n  payload: data,\r\n});\r\nconst fetchSingleNewsFailureAction = (data) => ({\r\n  type: \"FETCH_SINGLE_NEWS_FAILURE\",\r\n  payload: data,\r\n});\r\n\r\nconst fetchSingleNewsThunkAction = (service, fetchCondition, id) => (dispatch) => {\r\n  fetchSingleNewsRequestAction();\r\n  service\r\n    .getSingleItem(id)\r\n    .then((data) => {\r\n      if (!fetchCondition.canceled) dispatch(fetchSingleNewsSuccessAction(data));\r\n    })\r\n    .catch((error) => dispatch(fetchSingleNewsFailureAction(error)));\r\n};\r\n\r\nconst fetchCommentsRequestAction = () => ({\r\n  type: \"FETCH_COMMENTS_REQUEST\",\r\n});\r\nconst fetchCommentsSuccessAction = (data) => ({\r\n  type: \"FETCH_COMMENTS_SUCCESS\",\r\n  payload: data,\r\n});\r\nconst fetchCommentsFailureAction = (data) => ({\r\n  type: \"FETCH_COMMENTS_FAILURE\",\r\n  payload: data,\r\n});\r\n\r\nconst fetchCommentListThunkAction = (service, fetchCondition, ids) => (dispatch) => {\r\n  dispatch(fetchCommentsRequestAction());\r\n  service\r\n    .getListFromIds(ids)\r\n    .then((data) => {\r\n      if (!fetchCondition.canceled) dispatch(fetchCommentsSuccessAction(data));\r\n    })\r\n    .catch((error) => dispatch(fetchCommentsFailureAction(error)));\r\n};\r\n\r\nconst fetchShadowReloadCommentListThunkAction = (service, fetchCondition) => async (dispatch, getState) => {\r\n  try {\r\n    const oldNews = getState().singleNewsState.news;\r\n    const newNews = await service.getSingleItem(oldNews.id);\r\n    if (oldNews.descendants !== newNews.descendants && !fetchCondition.canceled) {\r\n      dispatch(fetchSingleNewsSuccessAction(newNews));\r\n    }\r\n  } catch (error) {\r\n    dispatch(fetchCommentsFailureAction(error));\r\n  }\r\n};\r\n\r\nconst fetchCommentTreeThunkAction = (service, fetchCondition, ids, parent, setExtendedComment) => (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  async function getCommentTree(ids) {\r\n    try {\r\n      const commentList = await service.getListFromIds(ids);\r\n      const extendedCommentListPromiseArray = commentList.map(async (comment) => {\r\n        if (comment.kids.length > 0) comment.extendedKids = await getCommentTree(comment.kids);\r\n        return comment;\r\n      });\r\n      return Promise.all(extendedCommentListPromiseArray);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n  getCommentTree(ids)\r\n    .then((tree) => {\r\n      if (!fetchCondition.canceled) {\r\n        const comments = getState().commentsState.comments;\r\n        const updatedComments = comments.map((item) => {\r\n          if (item.id === parent) item.extendedKids = tree;\r\n          return item;\r\n        });\r\n        dispatch(fetchCommentsSuccessAction(updatedComments));\r\n        setExtendedComment(null);\r\n      }\r\n    })\r\n    .catch((error) => dispatch(fetchCommentsFailureAction(error)));\r\n};\r\n\r\nconst removeCommentTreeThunkAction = (id) => (dispatch, getState) => {\r\n  const comments = getState().commentsState.comments;\r\n  const updatedComments = comments.map((comment) => {\r\n    if (comment.id === id) delete comment.extendedKids;\r\n    return comment;\r\n  });\r\n  dispatch(fetchCommentsSuccessAction(updatedComments));\r\n};\r\n\r\nexport {\r\n  fetchListRequestAction,\r\n  fetchListThunkAction,\r\n  fetchShadowReloadListThunkAction,\r\n  fetchSingleNewsRequestAction,\r\n  fetchSingleNewsThunkAction,\r\n  fetchCommentsRequestAction,\r\n  fetchCommentListThunkAction,\r\n  fetchShadowReloadCommentListThunkAction,\r\n  fetchCommentTreeThunkAction,\r\n  removeCommentTreeThunkAction,\r\n};\r\n","import { createContext } from \"react\";\r\n\r\nconst ServiceContext = createContext();\r\n\r\nexport default ServiceContext;\r\n","function addZero(date) {\r\n  return date < 10 ? `0${date}` : `${date}`;\r\n}\r\n\r\nexport default function dateFormatter(unixDate) {\r\n  const rawDate = new Date(unixDate * 1000);\r\n  return `${addZero(rawDate.getDate())}.${addZero(\r\n    rawDate.getMonth() + 1\r\n  )}.${rawDate.getFullYear()} в ${rawDate.getHours()}:${addZero(rawDate.getMinutes())}`;\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, CardContent, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport dateFormatter from \"../../utils/dateFormatter\";\r\n\r\nconst NewsCard = ({ item, style }) => {\r\n  const classes = useStyles();\r\n  return !item ? null : (\r\n    <Card key={item.id} className={classes.cardRoot} style={style} variant=\"outlined\">\r\n      <CardContent className={classes.cardContainer}>\r\n        <Link color=\"primary\" className={classes.itemText} to={`/${item.id}`}>\r\n          <Typography\r\n            title={item.title}\r\n            className={`${classes.itemText} ${classes.title}`}\r\n            variant=\"h6\"\r\n            component=\"h2\"\r\n          >\r\n            {item.title}\r\n          </Typography>\r\n        </Link>\r\n        <Typography className={classes.itemText} variant=\"body2\">\r\n          Автор: {item.by} | Дата: {dateFormatter(item.time)} | Рейтинг: {item.score}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  cardRoot: {\r\n    minWidth: 300,\r\n    border: \"none\",\r\n    background: \"none\",\r\n  },\r\n  cardContainer: {\r\n    padding: 5,\r\n  },\r\n  itemText: {\r\n    \"text-overflow\": \"ellipsis\",\r\n    \"white-space\": \"nowrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n  title: {\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nexport default NewsCard;\r\n","import React from \"react\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst ErrorComponent = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.container}>\r\n      <Typography variant=\"h5\" component=\"h5\" className={classes.text}>\r\n        Ошибка: {props.error.message}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    margin: \"50px 0\",\r\n  },\r\n  text: {\r\n    color: \"red\",\r\n  },\r\n});\r\nexport default ErrorComponent;\r\n","import React from \"react\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst Spinner = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Box className={classes.marginContainer}>\r\n      <CircularProgress />\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  marginContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    margin: \"50px 0\",\r\n  },\r\n});\r\nexport default Spinner;\r\n","import { Component } from \"react\";\r\nimport ErrorComponent from \"../ErrorComponent/ErrorComponent\";\r\n\r\nexport default class ErrorBoundary extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = { hasError: false };\r\n  }\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: error };\r\n  }\r\n  render() {\r\n    if (this.state.hasError) {\r\n      console.log(\"работает\");\r\n      return <ErrorComponent error={this.state.hasError} />;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","import React, { useEffect, useContext, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FixedSizeList } from \"react-window\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { Typography, Divider, Button, Box } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  fetchListThunkAction,\n  fetchListRequestAction,\n  fetchShadowReloadListThunkAction,\n} from \"../../actions/actions\";\nimport ServiceContext from \"../context/ServiceContext\";\nimport NewsCard from \"../NewsCard/NewsCard\";\nimport ErrorComponent from \"../ErrorComponent/ErrorComponent\";\nimport Spinner from \"../Spinner/Spinner\";\nimport ErrorBoundary from \"../ErrorBoundary/ErrorBoundary\";\n\nconst MainPage = (props) => {\n  const newsService = useContext(ServiceContext);\n  const [resetInterval, setResetInterval] = useState(false);\n  const classes = useStyles();\n  const {\n    fetchListThunkAction,\n    fetchListRequestAction,\n    fetchShadowReloadListThunkAction,\n    listState: { list, error, isLoading },\n  } = props;\n\n  useEffect(() => {\n    const fetchCondition = { canceled: false };\n    fetchListThunkAction(newsService, fetchCondition);\n    return () => {\n      fetchListRequestAction();\n      fetchCondition.canceled = true;\n    };\n  }, [resetInterval, fetchListThunkAction, fetchListRequestAction, newsService]);\n\n  useEffect(() => {\n    const fetchCondition = { canceled: false };\n    const interval = setInterval(\n      () => fetchShadowReloadListThunkAction(newsService, fetchCondition),\n      60 * 1000\n    );\n    return () => {\n      clearInterval(interval);\n      fetchCondition.canceled = true;\n    };\n  }, [resetInterval, fetchShadowReloadListThunkAction, newsService]);\n\n  return (\n    <>\n      <Box className={classes.flexContainer}>\n        <Typography variant=\"subtitle1\" component=\"h6\" className={classes.subtitle}>\n          Ваш источник крутых новостей!\n        </Typography>\n        <Box display=\"flex\">\n          <Typography\n            variant=\"subtitle1\"\n            component=\"h6\"\n            color=\"textSecondary\"\n            className={`${classes.subtitle}, ${classes.disabled}`}\n          >\n            Показаны самые новые, но вы можете\n          </Typography>\n          <Button\n            color=\"primary\"\n            className={classes.button}\n            onClick={() => setResetInterval(!resetInterval)}\n            disabled={isLoading}\n          >\n            Обновить\n          </Button>\n        </Box>\n      </Box>\n      <Divider className={classes.divider} />\n      {error ? (\n        <ErrorComponent error={error} />\n      ) : isLoading ? (\n        <Spinner />\n      ) : (\n        <Box className={classes.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <FixedSizeList\n                height={height}\n                width={width > 360 ? width : 360}\n                itemSize={85}\n                itemCount={list.length}\n              >\n                {({ index, style }) => (\n                  <ErrorBoundary>\n                    <NewsCard item={list[index]} style={style} />\n                  </ErrorBoundary>\n                )}\n              </FixedSizeList>\n            )}\n          </AutoSizer>\n        </Box>\n      )}\n    </>\n  );\n};\n\nconst useStyles = makeStyles({\n  subtitle: {\n    paddingLeft: 5,\n  },\n  divider: {\n    margin: \"10px 0\",\n  },\n  listContainer: {\n    flexGrow: 1,\n    \"@media (max-height:608px)\": {\n      minHeight: \"100vh\",\n    },\n  },\n  button: {\n    padding: \"0 0 0 5px\",\n    marginLeft: 5,\n  },\n  disabled: {\n    \"@media (max-width:767px)\": {\n      display: \"none\",\n    },\n  },\n  flexContainer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n  },\n});\n\nconst mapStateToProps = (state) => ({\n  listState: state.listState,\n});\nconst mapDispatchToProps = {\n  fetchListThunkAction,\n  fetchListRequestAction,\n  fetchShadowReloadListThunkAction,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport dompurify from \"dompurify\";\r\nimport { Typography, Box, Button, LinearProgress } from \"@material-ui/core\";\r\nimport backgroundArrow from \"../../images/arrow.png\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { fetchCommentTreeThunkAction } from \"../../actions/actions\";\r\nimport dateFormatter from \"../../utils/dateFormatter\";\r\n\r\nconst CommentCard = (props) => {\r\n  const { comment, extendHandler, isExtended, closeHandler, depth } = props;\r\n  const classes = useStyles({ depth });\r\n\r\n  return !comment || comment.deleted ? null : (\r\n    <Box className={classes.rootContainer}>\r\n      <Box className={classes.commentaryContainer}>\r\n        <Box className={classes.arrowContainer}>\r\n          <Typography variant=\"body2\" component=\"p\" className={classes.arrow}>\r\n            →\r\n          </Typography>\r\n        </Box>\r\n        <Box className={classes.commentaryBody}>\r\n          <Typography variant=\"body2\" component=\"span\">\r\n            <p dangerouslySetInnerHTML={{ __html: dompurify.sanitize(comment.text) }} />\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" component=\"p\" color=\"textSecondary\">\r\n            От {comment.by}, {dateFormatter(comment.time)}\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      {comment.kids.length > 0 &&\r\n        (!comment.extendedKids ? (\r\n          isExtended ? (\r\n            <LinearProgress className={classes.spinner} />\r\n          ) : (\r\n            <Button className={classes.button} onClick={extendHandler} color=\"primary\">\r\n              Показать ответы\r\n            </Button>\r\n          )\r\n        ) : (\r\n          <>\r\n            {closeHandler && (\r\n              <Button className={classes.button} onClick={closeHandler} color=\"primary\">\r\n                Скрыть ответы\r\n              </Button>\r\n            )}\r\n            <Box className={classes.childrenContainer}>\r\n              {comment.extendedKids.map((child) => (\r\n                <CommentCard key={child.id} comment={child} depth={depth + 1} />\r\n              ))}\r\n            </Box>\r\n          </>\r\n        ))}\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  rootContainer: {\r\n    margin: \"10px 0\",\r\n  },\r\n  commentaryContainer: {\r\n    display: \"flex\",\r\n  },\r\n  arrowContainer: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginRight: 10,\r\n    background: `url(${backgroundArrow}) left top no-repeat`,\r\n    backgroundSize: \"1px 50%\",\r\n  },\r\n  childrenContainer: (props) => ({\r\n    marginLeft: props.depth < 10 ? 25 : 0,\r\n  }),\r\n  arrow: { lineHeight: \"1px\" },\r\n  button: {\r\n    marginLeft: 25,\r\n    padding: 0,\r\n    textTransform: \"none\",\r\n    fontWeight: \"normal\",\r\n  },\r\n  spinner: {\r\n    margin: \"10px 0 10px 25px\",\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  commentsState: state.commentsState,\r\n});\r\nconst mapDispatchToProps = {\r\n  fetchCommentTreeThunkAction,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentCard);\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAABkCAIAAADITs03AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAClSURBVChTVZDbDUMxCEMp2X+ltoPx6DHkfjQSAhNjnNj38/bs8krzKnKHt+pUTVQSDYccYCvuywOuEUkIV18O3EoyeDOhe/VvL6k1q3159WfP7JAP1eIHta3+40P74AW4YzWFK6QLd3joGv1nbt63XnXX4EztBDPbepc0pE9ef+t1OcRwbm/m747rq0r/Bmd0pRPzr4/H0ZHn7OP+Ou1+rO3/mP0AJZgL7l01iawAAAAASUVORK5CYII=\"","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  fetchCommentsRequestAction,\r\n  fetchCommentListThunkAction,\r\n  fetchCommentTreeThunkAction,\r\n  removeCommentTreeThunkAction,\r\n} from \"../../actions/actions\";\r\nimport ServiceContext from \"../context/ServiceContext\";\r\nimport CommentCard from \"../CommentCard/CommentCard\";\r\nimport ErrorComponent from \"../ErrorComponent/ErrorComponent\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport ErrorBoundary from \"../ErrorBoundary/ErrorBoundary\";\r\n\r\nconst CommentList = (props) => {\r\n  const newsService = useContext(ServiceContext);\r\n  const [extendedComment, setExtendedComment] = useState(null);\r\n\r\n  const {\r\n    fetchCommentsRequestAction,\r\n    fetchCommentListThunkAction,\r\n    fetchCommentTreeThunkAction,\r\n    removeCommentTreeThunkAction,\r\n    commentsState: { comments, error, isLoading },\r\n    singleNewsState: { news },\r\n  } = props;\r\n\r\n  useEffect(() => {\r\n    const fetchCondition = { canceled: false };\r\n    fetchCommentListThunkAction(newsService, fetchCondition, news.kids);\r\n    return () => {\r\n      fetchCommentsRequestAction();\r\n      fetchCondition.canceled = true;\r\n    };\r\n  }, [fetchCommentListThunkAction, fetchCommentsRequestAction, newsService, news.kids]);\r\n\r\n  useEffect(() => {\r\n    const fetchCondition = { canceled: false };\r\n    if (extendedComment)\r\n      fetchCommentTreeThunkAction(\r\n        newsService,\r\n        fetchCondition,\r\n        extendedComment.kids,\r\n        extendedComment.id,\r\n        setExtendedComment\r\n      );\r\n    return () => (fetchCondition.canceled = true);\r\n  }, [extendedComment, fetchCommentTreeThunkAction, newsService]);\r\n\r\n  return error ? (\r\n    <ErrorComponent error={error} />\r\n  ) : isLoading ? (\r\n    <Spinner />\r\n  ) : (\r\n    comments.map((comment) => {\r\n      const isExtended = extendedComment && extendedComment.id === comment.id;\r\n      return (\r\n        <ErrorBoundary key={comment.id}>\r\n          <CommentCard\r\n            extendHandler={() => setExtendedComment(comment)}\r\n            closeHandler={() => removeCommentTreeThunkAction(comment.id)}\r\n            isExtended={isExtended}\r\n            comment={comment}\r\n            depth={0}\r\n          />\r\n        </ErrorBoundary>\r\n      );\r\n    })\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  singleNewsState: state.singleNewsState,\r\n  commentsState: state.commentsState,\r\n});\r\nconst mapDispatchToProps = {\r\n  fetchCommentsRequestAction,\r\n  fetchCommentListThunkAction,\r\n  fetchCommentTreeThunkAction,\r\n  removeCommentTreeThunkAction,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CommentList);\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport dompurify from \"dompurify\";\r\nimport { Typography, Divider, Button, Box, Link } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  fetchSingleNewsRequestAction,\r\n  fetchSingleNewsThunkAction,\r\n  fetchShadowReloadCommentListThunkAction,\r\n} from \"../../actions/actions\";\r\nimport ServiceContext from \"../context/ServiceContext\";\r\nimport ErrorComponent from \"../ErrorComponent/ErrorComponent\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport CommentList from \"../CommentList/CommentList\";\r\nimport dateFormatter from \"../../utils/dateFormatter\";\r\n\r\nconst NewsPage = (props) => {\r\n  const newsService = useContext(ServiceContext);\r\n  const [resetInterval, setResetInterval] = useState(false);\r\n  const params = useParams();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const {\r\n    fetchSingleNewsThunkAction,\r\n    fetchSingleNewsRequestAction,\r\n    fetchShadowReloadCommentListThunkAction,\r\n    singleNewsState: { news, error, isLoading },\r\n  } = props;\r\n\r\n  useEffect(() => {\r\n    const fetchCondition = { canceled: false };\r\n    fetchSingleNewsThunkAction(newsService, fetchCondition, params.id);\r\n    return () => {\r\n      fetchSingleNewsRequestAction();\r\n      fetchCondition.canceled = true;\r\n    };\r\n  }, [resetInterval, fetchSingleNewsThunkAction, fetchSingleNewsRequestAction, newsService, params.id]);\r\n\r\n  useEffect(() => {\r\n    const fetchCondition = { canceled: false };\r\n    const interval = setInterval(\r\n      () => fetchShadowReloadCommentListThunkAction(newsService, fetchCondition),\r\n      60 * 1000\r\n    );\r\n    return () => {\r\n      clearInterval(interval);\r\n      fetchCondition.canceled = true;\r\n    };\r\n  }, [resetInterval, newsService, fetchShadowReloadCommentListThunkAction]);\r\n\r\n  return error ? (\r\n    <ErrorComponent error={error} />\r\n  ) : isLoading ? (\r\n    <Spinner />\r\n  ) : !news || news.type !== \"story\" ? (\r\n    <ErrorComponent error={new Error(\"404: нет такой новости!\")} />\r\n  ) : (\r\n    <>\r\n      <Divider className={classes.divider} />\r\n      <Box className={classes.flexContainer}>\r\n        <Typography variant=\"h4\" component=\"h2\">\r\n          {news.title}\r\n        </Typography>\r\n        <Button className={classes.button} color=\"primary\" onClick={() => history.push(\"/\")}>\r\n          Назад\r\n        </Button>\r\n      </Box>\r\n      {news.text && (\r\n        <Typography variant=\"body1\" component=\"span\">\r\n          <p dangerouslySetInnerHTML={{ __html: dompurify.sanitize(news.text) }} />\r\n        </Typography>\r\n      )}\r\n      {news.url && (\r\n        <Link className={classes.link} target=\"_blank\" variant=\"subtitle2\" href={news.url}>\r\n          Ссылка на полную версию новости\r\n        </Link>\r\n      )}\r\n      <Typography variant=\"subtitle2\" component=\"p\" color=\"textSecondary\">\r\n        Автор {news.by}, дата {dateFormatter(news.time)}\r\n      </Typography>\r\n      <Divider className={classes.divider} />\r\n      <Box className={classes.flexContainer}>\r\n        <Typography variant=\"subtitle1\" component=\"p\">\r\n          Комментарии ({news.descendants})\r\n        </Typography>\r\n        <Button className={classes.button} color=\"primary\" onClick={() => setResetInterval(!resetInterval)}>\r\n          Обновить комментарии\r\n        </Button>\r\n      </Box>\r\n      <CommentList />\r\n    </>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  divider: {\r\n    margin: \"10px 0\",\r\n  },\r\n  link: {\r\n    marginTop: 10,\r\n  },\r\n  button: {\r\n    marginLeft: 5,\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"flex-start\",\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  singleNewsState: state.singleNewsState,\r\n});\r\nconst mapDispatchToProps = {\r\n  fetchSingleNewsRequestAction,\r\n  fetchSingleNewsThunkAction,\r\n  fetchShadowReloadCommentListThunkAction,\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsPage);\r\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport MainPage from \"../MainPage/MainPage\";\nimport NewsPage from \"../NewsPage/NewsPage\";\nimport ErrorComponent from \"../ErrorComponent/ErrorComponent\";\n\nconst App = () => {\n  return (\n    <Switch>\n      <Route path=\"/\" exact>\n        <MainPage />\n      </Route>\n      <Route path=\"/:id\" exact>\n        <NewsPage />\n      </Route>\n      <Route path=\"/:id\">\n        <ErrorComponent error={new Error(\"404: Нет такой страницы!\")} />\n      </Route>\n    </Switch>\n  );\n};\n\nexport default App;\n","const initialState = {\r\n  list: [],\r\n  ids: [],\r\n  error: null,\r\n  isLoading: true,\r\n};\r\n\r\nconst listReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_LIST_REQUEST\":\r\n      return {\r\n        ...state,\r\n        list: [],\r\n        error: null,\r\n        isLoading: true,\r\n      };\r\n    case \"FETCH_LIST_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        list: action.payload,\r\n        error: null,\r\n        isLoading: false,\r\n      };\r\n    case \"FETCH_LIST_FAILURE\":\r\n      return {\r\n        ...state,\r\n        list: [],\r\n        error: action.payload,\r\n        isLoading: false,\r\n      };\r\n    case \"SAVE_IDS\":\r\n      return {\r\n        ...state,\r\n        ids: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default listReducer;\r\n","const initialState = {\r\n  news: null,\r\n  error: null,\r\n  isLoading: true,\r\n};\r\n\r\nconst singleNewsReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_SINGLE_NEWS_REQUEST\":\r\n      return {\r\n        news: null,\r\n        error: null,\r\n        isLoading: true,\r\n      };\r\n    case \"FETCH_SINGLE_NEWS_SUCCESS\":\r\n      return {\r\n        news: action.payload,\r\n        error: null,\r\n        isLoading: false,\r\n      };\r\n    case \"FETCH_SINGLE_NEWS_FAILURE\":\r\n      return {\r\n        news: null,\r\n        error: action.payload,\r\n        isLoading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default singleNewsReducer;\r\n","const initialState = {\r\n  comments: [],\r\n  error: null,\r\n  isLoading: true,\r\n};\r\n\r\nconst commentsReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_COMMENTS_REQUEST\":\r\n      return {\r\n        comments: [],\r\n        error: null,\r\n        isLoading: true,\r\n      };\r\n    case \"FETCH_COMMENTS_SUCCESS\":\r\n      return {\r\n        comments: action.payload,\r\n        error: null,\r\n        isLoading: false,\r\n      };\r\n    case \"FETCH_COMMENTS_FAILURE\":\r\n      return {\r\n        comments: [],\r\n        error: action.payload,\r\n        isLoading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default commentsReducer;\r\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport listReducer from \"../reducers/listReducer\";\r\nimport singleNewsReducer from \"../reducers/singleNewsReducer\";\r\nimport commentsReducer from \"../reducers/commentsReducer\";\r\n\r\nconst store = createStore(\r\n  combineReducers({\r\n    listState: listReducer,\r\n    singleNewsState: singleNewsReducer,\r\n    commentsState: commentsReducer,\r\n  }),\r\n  applyMiddleware(thunk)\r\n);\r\n\r\nexport default store;\r\n","function checkRes(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  } else {\r\n    throw new Error(res.status);\r\n  }\r\n}\r\nfunction editItem(res) {\r\n  if (res && !res.kids) res.kids = [];\r\n  return res;\r\n}\r\n\r\nexport default class NewsService {\r\n  constructor() {\r\n    this.apiUrl = \"https://hacker-news.firebaseio.com/\";\r\n    this.packLength = 10;\r\n    this.listLength = 100;\r\n  }\r\n\r\n  getRawList = () => {\r\n    return fetch(`${this.apiUrl}/v0/newstories.json`).then(checkRes);\r\n  };\r\n\r\n  getSingleItem = (id) => {\r\n    return fetch(`${this.apiUrl}/v0/item/${id}.json`).then(checkRes).then(editItem);\r\n  };\r\n\r\n  getListFromIds = (ids) => {\r\n    const itemPromiseArray = ids.map((id) => this.getSingleItem(id));\r\n    return Promise.all(itemPromiseArray);\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/backgroundImage.2466819e.jpg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Container, Paper, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport backgroundImage from \"../../images/backgroundImage.jpg\";\r\n\r\nconst Layout = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Container maxWidth=\"md\" className={classes.root}>\r\n      <Paper className={classes.paper} elevation={3}>\r\n        <Link to=\"/\" className={classes.title} title={\"На главную\"}>\r\n          <Typography variant=\"h2\" component=\"h1\" className={classes.title}>\r\n            Hacker News\r\n          </Typography>\r\n        </Link>\r\n        {props.children}\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minHeight: \"100%\",\r\n    display: \"flex\",\r\n    padding: 0,\r\n  },\r\n  paper: {\r\n    margin: 5,\r\n    flexGrow: 1,\r\n    padding: \"5px 10px\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    backgroundImage: `url(${backgroundImage})`,\r\n    backgroundRepeat: \"repeat\",\r\n    minWidth: 360,\r\n  },\r\n  title: {\r\n    color: \"black\",\r\n    textDecoration: \"none\",\r\n    \"white-space\": \"nowrap\",\r\n  },\r\n});\r\n\r\nexport default Layout;\r\n","import React from \"react\";\nimport { Provider as StoreProvider } from \"react-redux\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./component/App/App\";\nimport store from \"./store/store\";\nimport ServiceContext from \"./component/context/ServiceContext\";\nimport NewsService from \"./service/NewsService\";\nimport Layout from \"./component/Layout/Layout\";\n\nconst newsService = new NewsService();\n\nReactDOM.render(\n  <React.StrictMode>\n    <ServiceContext.Provider value={newsService}>\n      <StoreProvider store={store}>\n        <BrowserRouter basename=\"/hacker-news\">\n          <Layout>\n            <App />\n          </Layout>\n        </BrowserRouter>\n      </StoreProvider>\n    </ServiceContext.Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}